import 'package:fish_redux/fish_redux.dart';import 'package:flutter/material.dart';import 'package:flutter_fly_plout/pages/home/first_page.dart';import 'package:flutter_fly_plout/pages/home/user_info.dart';import './main_app_bar.dart';import 'state.dart';DefaultTabController _tabController;TabBar _tabBar;class _Page {  final String labelId;  final int labelIndex;  _Page(this.labelId, this.labelIndex);}final List<_Page> _allPages = <_Page>[  _Page('推荐', 1),  _Page('电影', 2),  _Page('电视剧', 3),  _Page('少儿', 4),  _Page('动漫', 5),  _Page('纪录片', 6),  _Page('娱乐', 7),  _Page('游戏', 8),  _Page('生活', 9),  _Page('漫画', 10),  _Page('你猜', 11),  _Page('电视剧', 12),];Widget buildView(HomeState state, Dispatch dispatch, ViewService viewService) {  return HomePageWidget();}class HomePageWidget extends StatelessWidget {  final UserInformation userInfo;  HomePageWidget({Key key, this.userInfo}) : super(key: key);  @override  Widget build(BuildContext context) {    _tabController = DefaultTabController(        length: _allPages.length,        child: Scaffold(          appBar: MyAppBar(            leading: Container(                child: ClipOval(              child: Image.network('https://hbimg.huabanimg.com/9bfa0fad3b1284d652d370fa0a8155e1222c62c0bf9d-YjG0Vt_fw658',                scale: 15.0,              ),            )),            centerTitle: true,            title: TabLayout(),            actions: <Widget>[              IconButton(                  icon: Icon(Icons.search),                  onPressed: () {                    //pushPage(context, SearchPage(), pageName: "SearchPage");                  })            ],          ),          drawer: Drawer(              //child: DrawerPage(userInfo: userInfo),              ),          body: TabBarViewLayout(),        ));    return _tabController;  }}void pushPage(BuildContext context, Widget page, {String pageName}) {  if (context == null || page == null) return;  //Navigator.push(context, CupertinoPageRoute<void>(builder: (ctx) => page));}class TabLayout extends StatelessWidget {  @override  Widget build(BuildContext context) {    _tabBar = TabBar(        isScrollable: true,        //labelPadding: EdgeInsets.all(12.0),        labelPadding: EdgeInsets.only(top: 12.0, left: 12.0, right: 12.0),        indicatorSize: TabBarIndicatorSize.label,        tabs: _allPages.map((_Page page) => Tab(text: page.labelId)).toList(),        onTap: (index) {         /* if (index == 1) {            DefaultTabController.of(context).animateTo(0);            *//* Application.router.navigateTo(              context,              '${Routes.webViewPage}?title=${Uri.encodeComponent('Flutter Go 官方网站')}&url=${Uri.encodeComponent('https://flutter-go.pub')}',              transition: TransitionType.nativeModal,            );*//*          } else if (index == 2) {//          new Future.delayed(const Duration(seconds: 1),(){//            showAlertDialog(Application.globalContext);//          });            DefaultTabController.of(context).animateTo(0);            *//* Application.router.navigateTo(              context,              '${Routes.webViewPage}?title=${Uri.encodeComponent('Flutter Go web版(H5)')}&url=${Uri.encodeComponent('https://flutter-go.pub/flutter_go_web')}',              transition: TransitionType.nativeModal,            );*//*          }*/        });    return _tabBar;  }}class TabBarViewLayout extends StatelessWidget {  Widget buildTabView(BuildContext context, _Page page) {    int labelIndex = page.labelIndex;    switch (labelIndex) {      case 1:      case 2:      case 3:      case 4:      case 5:      case 6:      case 7:        return FirstPage();        break;      default:        return Container();        break;    }  }  @override  Widget build(BuildContext context) {    print("TabBarViewLayout build.......");    return TabBarView(        children: _allPages.map((_Page page) {      return buildTabView(context, page);    }).toList());  }}